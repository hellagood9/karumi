(this.webpackJsonpkarumi=this.webpackJsonpkarumi||[]).push([[0],{10:function(e,t,a){e.exports={navbar:"styles_navbar__3T34a","nav-right":"styles_nav-right__3BkrF",list:"styles_list__1Vz1E","list-item":"styles_list-item__1PqoM",logo:"styles_logo__2Lopg",btn:"styles_btn__24Ps7"}},15:function(e,t,a){e.exports={btn:"styles_btn__2_nSE","btn-primary":"styles_btn-primary__rdmKU",title:"styles_title__2ADP8",content__inner:"styles_content__inner__118z3",verification:"styles_verification__2QSEg"}},18:function(e,t,a){e.exports=a.p+"static/media/karumi-logo.52432395.png"},22:function(e,t,a){e.exports={container:"styles_container__Fky0R",content:"styles_content__1NEmN"}},31:function(e,t,a){e.exports={wrapper:"styles_wrapper__2e2Zn"}},32:function(e,t,a){e.exports=a(44)},4:function(e,t,a){e.exports={logo:"styles_logo__1BjiG",form:"styles_form__kE0-j","input-row":"styles_input-row__2sGl3","form-control":"styles_form-control__MoK8W",btn:"styles_btn__21Jky","btn-primary":"styles_btn-primary__SvwUc",feedback:"styles_feedback__nYdd1",error:"styles_error__27jN0","has-error":"styles_has-error__1RzNY"}},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),c=a.n(l),s=a(13),o=a.n(s),i=a(17),u=a(9),m=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"POST",headers:{Accept:"application/json"}},a&&(n.headers["Content-Type"]="application/json",n.body=JSON.stringify(a)),e.next=5,fetch("/.netlify/functions/".concat(t),n);case 5:if(!(r=e.sent).ok){e.next=11;break}return e.next=9,r.json();case 9:return l=e.sent,e.abrupt("return",l);case 11:if(r.ok){e.next=13;break}throw new Error("Something went wrong!");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}(),p=Object(n.createContext)({});function f(e){var t=e.children,a=Object(n.useState)({}),l=Object(u.a)(a,2),c=l[0],s=l[1];Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("jwtToken"),t=e&&JSON.parse(e);s(t)}()}),[]);var f=function(e){s(e),localStorage.setItem("jwtToken",JSON.stringify(e))},_=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("login",t);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:a&&f(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:{user:c,login:_,logout:function(){return console.log("logout")},verifyUser:function(){return console.log("verifyUser")}}},t)}var _=function(){return Object(n.useContext)(p)},b=a(11),E=a(2),d=a(8),v=a.n(d),g=a(27),y=a(18),h=a.n(y),w=a(10),j=a.n(w),N=function(){var e=_(),t=e.user.user,a=e.logout,n=t&&t.username;return r.a.createElement("nav",{className:j.a.navbar},r.a.createElement("div",{className:j.a["nav-left"]},r.a.createElement("div",{className:j.a.logo},r.a.createElement(b.b,{to:"/"},r.a.createElement("img",{src:h.a,alt:"Karumi's logo"})))),r.a.createElement("div",{className:j.a["nav-right"]},r.a.createElement("ul",{className:j.a.list},r.a.createElement("li",{"data-testid":"value",className:j.a["list-item"]},n),r.a.createElement("li",null,r.a.createElement("button",{className:j.a.btn,onClick:a},"Logout")))))},O=function(){return r.a.createElement("div",null,"Karumi @ 2020")},k=a(22),x=a.n(k),S=function(e){var t=e.children,a=e.title,n=e.description;return r.a.createElement("div",{className:x.a.container},r.a.createElement(g.a,null,r.a.createElement("title",null,a),r.a.createElement("meta",{name:"description",content:n})),r.a.createElement(N,null),r.a.createElement("main",{className:x.a.content},t),r.a.createElement(O,null))},C=a(15),K=a.n(C),P=function(){var e=_().user.user,t=e&&e.name;return r.a.createElement(S,{title:"Welcome to Karumi",description:"Karumi's technical challenge"},r.a.createElement("div",{className:K.a.content__inner},r.a.createElement("h1",{className:K.a.title},"Private Area"),r.a.createElement("h2",null,"Hello, ",t),r.a.createElement("button",{onClick:function(){return console.log("verifyMe")},className:v()(K.a.btn,K.a["btn-primary"])},"Verify user")))},A=function(){var e=Object(E.g)();return r.a.createElement("div",null,r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,e.pathname)))},J=function(){return r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/"},r.a.createElement(P,null)),r.a.createElement(E.b,{path:"/login"},r.a.createElement(E.a,{to:"/"})),r.a.createElement(E.b,{path:"*"},r.a.createElement(A,null)))},T=a(14),U=a(23),B=a(4),I=a.n(B),M=function(e){var t=e.onSubmit,a={username:"",password:""},l=function(e){var t={};return e.password?e.password.length<6&&(t.password="Min 6 characters"):t.password="Required",e.username?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.username)||(t.username="Invalid username (email address)"):t.username="Required",t},c=Object(n.useState)(a),s=Object(u.a)(c,2),o=s[0],i=s[1],m=Object(n.useState)(!1),p=Object(u.a)(m,2),f=p[0],_=p[1],b=Object(n.useState)(!1),E=Object(u.a)(b,2),d=E[0],g=E[1],y=Object(n.useState)(!1),w=Object(u.a)(y,2),j=w[0],N=w[1],O=Object(n.useState)({}),k=Object(u.a)(O,2),x=k[0],S=k[1],C=o.username,K=o.password,P=Object.keys(l({username:C,password:K})).length>0;Object(n.useEffect)((function(){S(l({username:C,password:K})),P||N(!1)}),[P,C,K]);var A=function(e){var t=e.target,a=t.name,n=t.value;i(Object(U.a)(Object(U.a)({},o),{},Object(T.a)({},a,n)))},J=function(){g(!0)};return r.a.createElement("form",{className:I.a.form,onSubmit:function(e){e.preventDefault(),P?N(!0):(_(!0),setTimeout((function(){t({username:C,password:K}),i(a),g(!1),N(!1),_(!1)}),500))}},r.a.createElement("div",{className:I.a.logo},r.a.createElement("img",{src:h.a,alt:"Karumi's logo"})),r.a.createElement("div",{className:I.a["input-row"]},r.a.createElement("input",{type:"email",name:"username",placeholder:"Username",autoComplete:"off",onChange:function(e){return A(e)},onBlur:J,value:C,className:v()(Object(T.a)({},I.a["has-error"],d&&x.username),[I.a["form-control"]])}),d&&r.a.createElement("div",{className:v()(I.a.feedback,I.a.error)},r.a.createElement("small",null,x.username))),r.a.createElement("div",{className:I.a["input-row"]},r.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:function(e){return A(e)},onBlur:J,value:K,className:v()(Object(T.a)({},I.a["has-error"],d&&x.password),[I.a["form-control"]])}),d&&r.a.createElement("div",{className:v()(I.a.feedback,I.a.error)},r.a.createElement("small",null,x.password))),j&&r.a.createElement("p",{className:v()(I.a.feedback,I.a.error)},"Username or Password incorrect!"),r.a.createElement("div",{className:I.a["input-row"]},r.a.createElement("button",{type:"submit",disabled:f,className:v()(I.a.btn,I.a["btn-primary"])},f?"Submitting...":"Login")))},R=a(31),Z=a.n(R),q=function(){var e=_().login;return r.a.createElement("div",{className:Z.a.wrapper},r.a.createElement(M,{onSubmit:e}))},z=function(){return r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/"},r.a.createElement(E.a,{to:"login"})),r.a.createElement(E.b,{path:"/login"},r.a.createElement(q,null)),r.a.createElement(E.b,{path:"*"},r.a.createElement(A,null)))},L=function(){var e=_().user;return r.a.createElement(b.a,null,e?r.a.createElement(J,null):r.a.createElement(z,null))},D=(a(42),a(43),function(){return r.a.createElement(f,null,r.a.createElement(L,null))});c.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.85e0f6af.chunk.js.map